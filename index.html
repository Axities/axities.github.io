<!DOCTYPE html>
<html>
<head><title>3DS Home Menu Customization Guide</title></head>
<body>
<link rel="stylesheet" type="text/css" href="/customization.css">
<link rel="shortcut icon" href="http://i.imgur.com/LDnJTcz.png">
<h1>Get Started</h1>
<h3>My name is <span>Dungeonfire#0512</span> on Discord if you have any suggestions</h3>
<p class="red">Create/update your nand backup! When making changes to your device, there is always the chance you will brick.</p>
<p class="red">Having a custom Home Menu installed breaks system updates. If you want to update your system, you will have to restore your Home Menu with a blank <code>HomeMenu.cia</code> first.</p>
<h3>In this guide we will be customizing the looks of your Home and Sleep Menu. It will certainly not cover everything that you are able to customize, but this guide should give you an idea as to what extent you can personalize your device. If you would like to customize aspects of it that are not listed on here, I suggest checking out the <a href="https://docs.google.com/spreadsheets/d/1Q-Im3P5zSqNi6zYqaXtyS138hCdcIJDY7WxRt_FWdrg/edit">documentation</a> by Team <a href="http://homemenu.co/">homemenu.co</a></h3>
<hr>
<h3>Prerequisites:</h3>
<ul>
  <li>The latest version of <a href="https://mega.nz/#!BhkWnI6a!QA_2cVB9kQKGpQnUlbJ7Llnn4Nm8nu5ucr5Gx_jXh4k">Home Menu Rebuilding Tool by DeKay</a></li>
  <li>The latest version of <a href="https://mh-nexus.de/en/downloads.php?product=HxD">HxD</a></li>
  <li>The latest version of <a href="https://github.com/IcySon55/3DLandMSBTeditor/releases">MSBT Editor Reloaded</a></li>
  <li>The latest version of <a href="http://www.cheatengine.org/download.php">Cheat Engine 6.6</a></li>
  <li>The latest version of <a href="https://mega.nz/#!V1klXT7a!6OB70Pi1Rz0aKq0ewiGUvS3Sk4JSkreZpal4Tbe90q0">HME Positions by DeKay</a></li>
  <li><a href="http://www.color-hex.com/">Hex Colors</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Coordinate_system">Knowledge of how to work with Coordinates</a></li>
  <li>The title ID and version of the <a href="https//pastebin.com/raw/NxMrrjqw:">HomeMenu.cia</a> for your device, firmware and region</li>
  </ul>
<h3>Section I - Preperation Work</h3>
<ol>
  <li>Download and extract the contents of <code>HMRT_Dev_Build_v0.7.7z</code></li>
  <li>Download and install HxD, or alternatively download and extract the portable version</li>
  <li>Download and extract the contents of <code>MSBT.Editor.Reloaded.v0.9.8.rar</code></li>
  <li>Download and install Cheat Engine 6.6</li>
  <li>Download HME Positions by DeKay</li>
  <p class="blue">(click to enlarge the image)<br><a href="http://i.imgur.com/EQBcu73.png"><img src="http://i.imgur.com/EQBcu73.png"></a><br>Minus <code>3DNUS.exe</code></p>
</ol>
<h3>Section II - Decompressing the <code>HomeMenu.cia</code></h3>
<p>In this section we will be dumping and decompressing your device-specific <code>HomeMenu.cia</code> in preparation for the editing process.</p>
<ol>
  <li>Insert the SD Card into your device</li>
  <li>Launch your device and enter GodMode9</li>
  <ul>
    <li>Navigate to [1:] SYSNAND CTRNAND</li>
    <li>Navigate to <code>title</code></li>
    <li>Navigate to <code>00040030</code></li>
    <li>Navigate to the last 8 digits corresponding to your region:</li>
     <ul>
       <li>USA: <code>00008F02</code></li>
       <li>EUR: <code>00009802</code></li>
       <li>JPN: <code>00008202</code></li>
     </ul>
    <li>Navigate to <code>content</code></li>
    <li>Press (A) on the <code>.tmd</code> file &#8594; MD file options... &#8594; Build CIA (standard)</li>
  </ul>
  <li>Turn off your system and insert your SD card into your computer</li>
  <li>Rename the dumped <code>.cia</code> to <code>HomeMenu.cia</code> and place in the same folder as the Home Menu Rebuilding Tool</li>
  <li>Launch the Home Menu Rebuilding Tool and press (8)</li>
</ol>
<h3>Section III - Editing the Sleep Menu</h3>
<ol>
  <li>Launch MsbtEditor</li>
  <li>Open<br><code>/ExtractedRomFS/message/&lt;Region of your device&gt;_&lt;Language of your device&gt;/menu_msbt.LZ</code></li>
  <li>This is where the text of the Sleep Menu will be located:</li>
  <ul>
    <li><code>lau_b_shutdown</code></li>
    <li><code>lau_press_pow_u0</code></li>
    <li><code>lau_press_pow_u1</code></li>
    <li><code>lau_press_pow0</code></li>
    <li><code>lau_press_pow1</code></li>
    <li><code>lau_press_pow2</code></li>
    <li><code>lau_press_pow3</code></li>
    <li><code>lau_press_pow4</code></li>
    <li><code>lau_press_pow5</code></li>
    <li><code>lau_press_pow5_flw</code></li>
  </ul>
  <li>To change the text, choose one of the strings from the list on the left and edit the text in the top left box</li>
  <li>You can change any other text that is unrelated to the Sleep Menu if you like</li>
  <li>When you are done, simply save and close the program</li>
  <p class="blue"><a href="http://i.imgur.com/cr6y5BW.png"><img src="http://i.imgur.com/cr6y5BW.png"></a></p>
  <li>Launch HxD and open <code>/ExtractedRomFS/sleep.LZ</code></li>
  <li>These are the values you can modify:</li>
  <table class="tg">
    <tr>
        <th class="tg-yw4l">Description</th>
        <th class="tg-yw4l">Bottom Screen<br></th>
        <th class="tg-yw4l">Top Screen<br></th>
    </tr>
    <tr>
        <td class="tg-yw4l">Background</td>
        <td class="tg-yw4l">0x00001260</td>
        <td class="tg-yw4l">0x00001CD4</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Background Glow</td>
        <td class="tg-yw4l">0x00001264</td>
        <td class="tg-yw4l">0x00001CD8</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Background Stripes</td>
        <td class="tg-yw4l">0x0000125C</td>
        <td class="tg-yw4l">0x00001CD0</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Header Color</td>
        <td class="tg-yw4l">-</td>
        <td class="tg-yw4l">0x00001D70</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Text Color</td>
        <td class="tg-yw4l">0x000012FC</td>
        <td class="tg-yw4l">0x00001DA4</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Footer Color</td>
        <td class="tg-yw4l">0x0000122C</td>
        <td class="tg-yw4l">0x00001EA8</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Line Color</td>
        <td class="tg-yw4l">0x00001554</td>
        <td class="tg-yw4l">0x00001E24</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Button Text Color</td>
        <td class="tg-yw4l">0x000014D4</td>
        <td class="tg-yw4l">-</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Button Text Mask</td>
        <td class="tg-yw4l">0x000014A0</td>
        <td class="tg-yw4l">-</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Button Color</td>
        <td class="tg-yw4l">0x0000132C 0x000013E4</td>
        <td class="tg-yw4l">-</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Button Glow</td>
        <td class="tg-yw4l">0x00001330 0x000013E8</td>
        <td class="tg-yw4l">-</td>
    </tr>
  </table>
  <li>To jump to a value without looking for it manually, press <code>Ctrl+G</code> and enter everything from the offset value excluding <code>0x</code></li>
  <li>Each of these values are 3 size offsets, so only edit the next 3 pairs of hex for each offset</li>
  <p class="blue"><a href="http://i.imgur.com/u15K8W6.png"><img src="http://i.imgur.com/u15K8W6.png"></a></p>
  <ul>
    <li>Use values like <code>#213BBD</code> instead of <code>(33,59,189)</code>. They are both the same color, but only the first format is supported
  </ul>
  <li>After you are done replacing the hex values with the colors you desire, save</li>
</ol>
<h3>Section IV - Editing the icons of the Home Menu</h3>
<p>In this section we will be editing the color of the icons displayed on the Home Menu. (Notes, Friends, Notifications, etc.)</p>
<ol>
  <li>Start off by opening <code>/ExtractedRomFS/launcher.LZ</code> in HxD</li>
  <li>These are the values you can modify:</li>
  <table class="tg">
    <tr>
        <th class="tg-yw4l">Icon</th>
        <th class="tg-yw4l">Color 1<br></th>
        <th class="tg-yw4l">Color 2<br></th>
    </tr>
    <tr>
        <td class="tg-yw4l">Miiverse<br></td>
        <td class="tg-yw4l">0x00031DA8</td>
        <td class="tg-yw4l">0x00031DAC</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Internet Browser<br></td>
        <td class="tg-yw4l">0x00031E84</td>
        <td class="tg-yw4l">0x00031E88</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Notifications</td>
        <td class="tg-yw4l">0x00031F60</td>
        <td class="tg-yw4l">0x00031F64</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Friend List<br></td>
        <td class="tg-yw4l">0x0003203C</td>
        <td class="tg-yw4l">0x00032040</td>
    </tr>
    <tr>
        <td class="tg-yw4l">Game Notes<br></td>
        <td class="tg-yw4l">0x00032118</td>
        <td class="tg-yw4l">0x0003211C</td>
    </tr>
  </table>
  <li>Just as before, each value is a 3 size offset</li>
  <li>After you are done making your edits, save</li>
  <li>Now we also need to modify the banners displayed at the top screen</li>
  <li>The files responsible for those banners are:</li>
  <ul>
    <li><code>/ExtractedRomFS/3D/BannerAppletFriend.LZ</code> (Friends)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletMemo.LZ</code> (Game Notes)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletMvs.LZ</code> (Miiverse)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletNews.LZ</code> (Notifications)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletWeb.LZ</code> (Internet Browser)</li>
  </ul>
  <li>These are the offsets for the colors, they are the same for each file:</li>
  <table class="tg">
  <tr>
    <th class="tg-yw4l">Color 1<br></th>
    <th class="tg-yw4l">Color 2<br></th>
  </tr>
  <tr>
    <td class="tg-yw4l">0x00001D7C</td>
    <td class="tg-yw4l">0x00001D80</td>
  </tr>
  </table>
  <li>Again, those are 3 size offsets</li>
  <li>After you have saved every file, you are free to close HxD</li>
</ol>
<p></p>
<h3>Section V - Editing the HUD</h3>
<p>In this section we will be editing the elements that are displayed on the top screen of the Home Menu.</p>
<ol>
  <li>Launch Cheat Engine and open the file <code>/ExtractedRomFS/hud.LZ</code></li>
  <ul>
    <li>If an error occurs, just press okay and continue</li>
  </ul>
  <li>Drag &#38; drop the <code>HME_Positions_By_DeKay.CT</code> in the Cheat Engine window</li>
  <li>You can now edit the color- and position values of elements as you please</li>
  <li>Colors are standard RGB format; for the coordinates please refer to this image by Zyneros:</li>
  <p class="blue"><a href="http://i.imgur.com/CicWQW5.png"><img src="http://i.imgur.com/CicWQW5.png"></a></p>
  <ul>
    <li>If you want to remove an element, you can edit the position values of the corresponding element to a very high number</li>
    <li>This does not work for the connection status bar. If you want to remove it, open <code>hud.LZ</code> in HxD and change the following offsets to <code>00</code>:<br>
    <code>0x000097E2</code><br>
    <code>0x000098A2</code><br>
    <code>0x00009962</code></li>
    <li>Those are 1 size offsets, so only edit the pair your cursor jumps to when entering the offset value</li>
  </ul>
  <li>When you are done editing the values, check the box of each one you edited and close Cheat Engine</li>
</ol>
<h3>Section VI - Installing the <code>.cia</code></h3>
<p>In this section we will be rebuilding, encrypting, and installing the <code>.cia</code> file.</p>
<ol>
  <li>Return to the Home Menu Rebuilding Tool window and press any key to rebuild the <code>.cia</code></li>
   <ul>
     <li>If you accidentally closed the prompt, open it up again and press 6 &#8594; 2 &#8594; 3</li>
   </ul>
  <li>Move the <code>HomeMenu_edited.cia</code> to your SD Card</li>
  <li>Remove the SD Card from your computer and insert it into your device</li>
  <li>Launch your device and enter GodMode9</li>
  <ul>
      <li>: Press (A) on <code>HomeMenu_edited.cia</code> &#8594; CIA image options &#8594; Encrypt file (...) &#8594; Encrypt inplace</li>
  </ul> 
  <li>Restart your device and install the <b>encrypted</b> <code>.cia</code> file with your favorite <code>.cia</code> installer. If no error occurs, reset your device manually</li>
  <li>You should now have your custom Home Menu installed!</li>
  <ul>
    <li>Here a few pictures of what my Home Menu looks like: (This is almost entirely copied from Zyneros' Home Menu theme, because I actually really like it)</li>
  </ul>
  <p class="blue"><a href="http://i.imgur.com/dQJr7Cj.png"><img src="http://i.imgur.com/dQJr7Cj.png"></a></p>
  <p class="blue"><a href="http://i.imgur.com/pmBHF2g.png"><img src="http://i.imgur.com/pmBHF2g.png"></a></p>
</ol>
<hr>
<p class="blue">If you want to update your Home Menu with a newer one, you need to install a fresh <code>HomeMenu.cia</code> first which you can just download via 3DNUS.<p>
<p class="blue">Keep the decrypted <code>HomeMenu_edited.cia</code> file in the folder you did your edits in, in case you want to make changes later on.</p>
<p class="blue">If you have trouble with anything, ask on the <a href="https://discord.gg/0z7IGZ5Sv3D0mEN0">Custom Home Menu Asset Discussion</a> Discord server.</p>
<p class="blue">Credit goes to:<br>
&#9679; DeKay for some of the files<br>
&#9679; <a href="https://github.com/mmistakes/minimal-mistakes">Minimal Mistakes</a> since I blatantly stole some of their CSS (will remove/change upon request!)<br>
&#9679; <a href="http://homemenu.co">homemenu.co</a> (currently down)<br>
&#9679; Traiver, Romulator, DeKay, and everyone who contributed to <a href="https://docs.google.com/spreadsheets/d/1Q-Im3P5zSqNi6zYqaXtyS138hCdcIJDY7WxRt_FWdrg/edit">the documentation</a><br>
&#9679; Zyneros because I used his guide as a template<br>
&#9679; ScribbL, Sobliv, Romulator, and Ms. Ferreira for their proofreading<br>
&#9679; The Custom Home Menu Asset Discussion <a href="https://discord.gg/0z7IGZ5Sv3D0mEN0">Discord Server</a> for the great help.</p>
<hr>
</body>
</html>
