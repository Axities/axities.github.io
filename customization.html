<!DOCTYPE html>
<html>
<head><title>3DS Guide - 3DS Customization Guide</title></head>
<body>
<link rel="stylesheet" type="text/css" href="/customization.css">
<h1>Get Started</h1>
<p>Create/update your nand backup! When making changes to your device, there is always the chance you will brick.</p>
<h3>What you need</h3>
<ul>
  <li>The latest version of <a href="https://gbatemp.net/threads/3dnus.376488/">3DNUS 1.9</a></li>
  <li>The latest version of <a href="https://mega.nz/#!BhkWnI6a!QA_2cVB9kQKGpQnUlbJ7Llnn4Nm8nu5ucr5Gx_jXh4k">Home Menu Rebuilding Tool by DeKay</a></li>
  <li>The latest version of <a href="https://mh-nexus.de/en/hxd/">HxD</a></li>
  <li>The latest version of <a href="https://github.com/IcySon55/3DLandMSBTeditor/releases">MSBT Editor Reloaded</a></li>
  <li>The latest version of <a href="http://www.cheatengine.org/download.php">Cheat Engine 6.6</a></li>
  <li>The latest version of <a href="https://mega.nz/#!V1klXT7a!6OB70Pi1Rz0aKq0ewiGUvS3Sk4JSkreZpal4Tbe90q0">HME Positions by DeKay</a></li>
  <li><a href="http://www.color-hex.com/">Hex Colors</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Coordinate_system">Knowledge of how to work with Coordinates</a></li>
  <li>The title ID and version of the<a href="https://yls8.mtheall.com/ninupdates/reports.php"> HomeMenu.cia</a> for your device, firmware and region.</li>
  </ul>
<p>If you can't find the Home Menu in the title IDs for your Firmware, go down a Firmware version and check if that one has it. If not repeat the process</p>
<h3>Section I - Preperation Work</h3>
<ol>
  <li>Download and extract the contents of <code>3DNUS1.9.rar</code> into any folder you like</li>
  <li>Download and extract the contents of <code>HMRT_Dev_Build_v0.7.7z</code> in the same folder</li>
  <li>Download and install HxD, or alternatively download the portable version and put it in the same folder as the previous steps</li>
  <li>Download and extract the contents of <code>MSBT.Editor.Reloaded.v0.9.8.rar</code> in the same folder as the steps above</li>
  <li>Download and install Cheat Engine 6.6</li>
  <li>Download HME Positions by DeKay and place it anywhere you can find it</li>
</ol>
<h3>Section II - Decompressing the <code>HomeMenu.cia</code></h3>
<p>In this section we will be Downloading, Decrypting and Decompressing your device specific <code>HomeMenu.cia</code> in preparation for the editing process.</p>
<ol>
  <li>Launch 3DNUS and enter the title ID and version of your Home Menu</li>
  <li>Wait for the Download to finish and close the program</li>
  <li>Rename the <code>&lt;TitleID&gt;.cia</code> to <code>"HomeMenu.cia"</code> and place it anywhere on your SD card</li>
  <li>Insert the SD Card into your device</li>
  <li>Launch your device and enter GodMode9 or Decrypt9 depending on what suits you best</li>
  <ul>
      <li>GodMode9: Press (A) on <code>HomeMenu.cia</code> -> CIA image options -> Decrypt file (...) -> Decrypt inplace</li>
      <li>Decrypt9: Content Decryptor Options -> CIA File Options -> CIA Decryptor (Deep)</li>
  </ul>
  <li>Once the <code>HomeMenu.cia</code> has been Decrypted turn off your system and insert your SD card into your computer</li>
  <li>Cut the <code>HomeMenu.cia</code> and paste it in the same folder as 3DNUS put the original <code>&lt;TitleID&gt;.cia</code> file</li>
  <li>Launch the Home Menu Rebuilding Tool and press (8)</li>
</ol>
<h3>Section III - Editing the Sleep Menu</h3>
<p>In this section we will be editing what your device will look like when you press power.</p>
<ol>
  <li>Launch <code>MsbtEditor.exe</code></li>
  <li>Open <code>/ExtractedRomFS/message/&lt;Region of your device&gt;_&lt;Language of your device&gt;/menu_msbt.LZ</code></li>
  <li>This is where the Text on the Sleep Menu will be located:</li>
  <ul>
    <li><code>lau_b_shutdown</code></li>
    <li><code>lau_press_pow_u0</code></li>
    <li><code>lau_press_pow_u1</code></li>
    <li><code>lau_press_pow0</code></li>
    <li><code>lau_press_pow1</code></li>
    <li><code>lau_press_pow2</code></li>
    <li><code>lau_press_pow3</code></li>
    <li><code>lau_press_pow4</code></li>
    <li><code>lau_press_pow5</code></li>
    <li><code>lau_press_pow5_flw</code></li>
  </ul>
  <li>To change the text it will display, simply choose one of the listed options and edit the text in the left box</li>
  <li>You can also change other text that is unrelated to the sleep menu</li>
  <li>When you are done simply save and close the program</li>
  <li>Launch HxD and Open <code>/ExtractedRomFS/sleep.LZ</code></li>
  <li>These are the values you can modify:</li>
  <table class="tg">
  <tr>
    <th class="tg-yw4l">Description</th>
    <th class="tg-yw4l">Bottom Screen<br></th>
    <th class="tg-yw4l">Top Screen<br></th>
  </tr>
  <tr>
    <td class="tg-yw4l">Background</td>
    <td class="tg-yw4l">0x00001260</td>
    <td class="tg-yw4l">0x00001CD4</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Background Glow</td>
    <td class="tg-yw4l">0x00001264</td>
    <td class="tg-yw4l">0x00001CD8</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Background Stripes</td>
    <td class="tg-yw4l">0x0000125C</td>
    <td class="tg-yw4l">0x00001CD0</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Header Color</td>
    <td class="tg-yw4l">-</td>
    <td class="tg-yw4l">0x00001D70</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Text Color</td>
    <td class="tg-yw4l">0x000012FC</td>
    <td class="tg-yw4l">0x00001DA4</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Footer Color</td>
    <td class="tg-yw4l">0x0000122C</td>
    <td class="tg-yw4l">0x00001EA8</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Line Color</td>
    <td class="tg-yw4l">0x00001554</td>
    <td class="tg-yw4l">0x00001E24</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Button Text Color</td>
    <td class="tg-yw4l">0x000014D4</td>
    <td class="tg-yw4l">-</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Button Text Mask</td>
    <td class="tg-yw4l">0x000014A0</td>
    <td class="tg-yw4l">-</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Button Color</td>
    <td class="tg-yw4l">0x0000132C 0x000013E4</td>
    <td class="tg-yw4l">-</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Button Glow</td>
    <td class="tg-yw4l">0x00001330 0x000013E8</td>
    <td class="tg-yw4l">-</td>
  </tr>
</table>
  <li>To jump to a value without looking for it, press <code>Ctrl+G</code> and enter everything after <code>0x</code></li>
  <li>Each one of these values is a 3 size offset (RGB), so only edit the next 3 pairs of hex</li>
  <li>After you are done replacing the hex values with the colors you desire, save</li>
</ol>
<h3>Section IV - Editing the Icons on the Home Menu</h3>
   <p>In this section we will be editing the color of the Icons displayed on the Home Menu (Notes, Friends, Notifications, etc.)</p>
   <p>If you want to make the icons 1 consistent color it will be a lot of trial and error since the icons have a gradient. If you want to try your luck, Color 1 needs to be darker than Color 2</p>
  <li>Start off by opening <code>/ExtractedRomFS/launcher.LZ</code> in HxD</li>
  <li>These are the values you can modify:</li>
  <table class="tg">
  <tr>
    <th class="tg-yw4l">Icon</th>
    <th class="tg-yw4l">Color 1<br></th>
    <th class="tg-yw4l">Color 2<br></th>
  </tr>
  <tr>
    <td class="tg-yw4l">Miiverse<br></td>
    <td class="tg-yw4l">0x00031DA8</td>
    <td class="tg-yw4l">0x00031DAC</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Internet Browser<br></td>
    <td class="tg-yw4l">0x00031E84</td>
    <td class="tg-yw4l">0x00031E88</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Notifications</td>
    <td class="tg-yw4l">0x00031F60</td>
    <td class="tg-yw4l">0x00031F64</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Friend List<br></td>
    <td class="tg-yw4l">0x0003203C</td>
    <td class="tg-yw4l">0x00032040</td>
  </tr>
  <tr>
    <td class="tg-yw4l">Game Notes<br></td>
    <td class="tg-yw4l">0x00032118</td>
    <td class="tg-yw4l">0x0003211C</td>
  </tr>
</table>
  <li>As before, after you are done making your edits, just save</li> 
  <li>Now we also need to modify the banners displayed at the top screen</li>
  <li>The files responsible for those banners are:</li>
  <ul>
    <li><code>/ExtractedRomFS/3D/BannerAppletFriend.LZ</code> (Friends)</li> 
    <li><code>/ExtractedRomFS/3D/BannerAppletMemo.LZ</code> (Game Notes)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletMvs.LZ</code> (Miiverse)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletNews.LZ</code> (Notifications)</li>
    <li><code>/ExtractedRomFS/3D/BannerAppletWeb.LZ</code> (Internet Browser)</li>
  </ul>
  <li>These are the offsets for the colors, they are the same for each file:</li>
  <table class="tg">
  <tr>
    <th class="tg-yw4l">Color 1<br></th>
    <th class="tg-yw4l">Color 2<br></th>
  </tr>
  <tr>
    <td class="tg-yw4l">0x00001D7C</td>
    <td class="tg-yw4l">0x00001D80</td>
  </tr>
  </table>
  <li>After you saved every file you are free to close HxD</li>
<h3>Section V - Editing the Hud</h3>
<p>In this section we will be editing the elements displayed on the top screen of the Home Menu</p>
<li>Launch Cheat Engine and Open the File <code>/ExtractedRomFS/hud.LZ</code></li>
  <ul>
    <li>If it gives you an error, just press okay and continue</li>
  </ul>
  <li>Drag &#38; Drop the <code>HME_Positions_By_DeKay.CT</code> in the Cheat Engine window.</li>
  <li>You can now edit the color and position values of elements as you please</li>
  <li>Colors are standard RGB format, for the coordinates please refer to <a href="http://i.imgur.com/CicWQW5.png">this</a> image</li>
  <ul>
    <li>If you want to remove an element you can edit the position values of the corresponding element to something high.</li>
    <li>This does not work for the internet bar. If you want to remove it open hud.LZ in HxD and change the following offsets to 00</li>
    <li>0x000097E2</li>
    <li>0x000098A2</li>
    <li>0x00009962</li>
    <li>Those are 1 size offsets, so only edit the pair your cursor jumps to when entering the offset value</li>
  </ul>
  <li>When you are done editing the values, check the box of each one you edited and close Cheat Engine</li>
<h3>Section VI - Installing the .cia</h3>
  <p>In this section we will be rebuilding, encrypting and installing the .cia file</p>
  <li>Return to the Home Menu Rebuilding Tool window and press any key to rebuild the .cia</li>
  
<p>Keep your <code>HomeMenu_edited.cia</code> file in the folder you did your edits in, in case you want to do further edits.</p>
<p>If you have trouble with anything, ask on the <a href="https://discord.gg/0z7IGZ5Sv3D0mEN0">Custom Home Menu Asset Discussion</a> Discord server.</p>
<p>Credit goes to DeKay for some of the files, to plailect because I blatantly stole his CSS (will remove/change upon request!), <a href="https://docs.google.com/spreadsheets/d/1Q-Im3P5zSqNi6zYqaXtyS138hCdcIJDY7WxRt_FWdrg/edit">homemenu.co</a> for their documentation, Zyneros because I used his guide as a template and the Custom Home Menu Asset Discussion Discord server for the great help the offer.</p>
</body>
</html> 
